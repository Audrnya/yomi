<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="./gasp.jpg" type="image/x-icon">
  <title>よみ</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css">
</head>


<body>

<div id="main-container" class="box">

  <textarea 
    id="mirror"
    class="block textarea is-large has-fixed-size" 
    placeholder="ここにテキストを入力。"
    oninput="_onMirrorInput(this.value)"
  ></textarea>

  <div 
    id="reflection"
    class="block textarea is-large has-fixed-size is-info" 
  ></div>

  <button
    id="clear-button"
    class="block button is-danger is-inverted is-rounded"
    onclick="_onClearClick()"
  >テキストを削除
  </button>

  <button
    id="jisho-button"
    class="block button is-success is-outlined is-rounded"
    onclick="_onJishoClick()"
  >Jishoで調べる
  </button>

  <figure class="image">
    <img
      src="./gasp.jpg"
      class="is-rounded"
    />
  </figure>

</div>

</body>

<script>
  var mirror = document.getElementById("mirror")
  var reflection = document.getElementById("reflection")


  document.addEventListener("DOMContentLoaded", () => {
    _onMirrorInput(mirror.value)
  })
  

  function _onMirrorInput(value) {
    reflection.innerText = value
  }

  function _onClearClick() {
    mirror.value = ""
    reflection.innerText = ""
  }

  function _onJishoClick() {
    let userInput = encodeURIComponent(mirror.value)

    let newUrl = `https://jisho.org/search/${userInput}`
    window.location.assign(newUrl)
  }
</script>

</html>
